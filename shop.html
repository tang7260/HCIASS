<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<link rel="stylesheet" href="css/bootstrap-v4.0.0-alpha.4.min.css" />
<link href="css/animate.min.css" rel="stylesheet" />

<link rel="stylesheet" href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" />
<link rel="stylesheet" href="css/styles.css" />
<link rel="stylesheet" href="css/slider.css" />
<link rel="stylesheet" href="css/shop.css">
<link rel="stylesheet" href="css/search.css"/>
<style>

    ::-webkit-scrollbar {
        width: 10px;
    }

    ::-webkit-scrollbar-track {
        background-color: #cfd3df;
        border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
        border-radius: 10px;
        background-color: #343642;
    }

</style>
<script src="js/jquery-3.1.1.min.js"></script>
<script src="js/tether.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script src="js/jquery.easing.min.js"></script>
<script src="js/wow.js"></script>
<script src="js/scripts.js"></script>
<script src="js/js.cookie.js"></script>

<body>
<div id="navHtml"></div>
<form class="search_bar" style="margin-top: 90px;" onsubmit="return false;">
    <div class="search_dropdown" style="width: 16px;">
        <span>All</span>
        <ul>
            <li id="all" class="selected" >All</li>
            <li id="earphone" >Earphone</li>
            <li id="notebook" >NoteBook</li>
            <li id="tools" >Tools</li>
        </ul>
    </div>

    <input id="keyword" type="text" placeholder="Search for anything" />
    <button id="search" type="submit" value="Search">Search</button>
</form>


    <div class="container wow fadeIn" style="margin-top: 50px;" id="showitem">
    </div>


</body>
<script>
    $(function(){
        $("#navHtml").load("nav.html");
    });

    $("#search").click(function () {
        var keyword = $("#keyword").val();
        var type = $(".selected").text();
        var str = "";
        str.indexOf()
        $("#showitem").html("");
        if(type == "All"){
            $.ajax({
                type: 'POST',
                url: "product.json",
                dataType: 'json',
                success: function (result) {
                    tableString = "";
                    i=0;
                    $.each(result, function (row, value) {
                        var i = value.name.indexOf(keyword);
                        if(i == 0){
                            tableString += "<figure class=\"snip1268 wow fadeIn\">\n" +
                                "        <div class=\"image\">\n" +
                                "            <img src=\"" + value.img + "\" alt=\"sq-sample15\"/>\n" +
                                "            <a href=\"#\" class=\"add-to-cart\" onclick=\"goShoppingCart($(this))\">Add to Cart</a>\n" +
                                "            <input class=\"itemId\" type=\"text\" value=\"" + value.id + "\" hidden>\n" +
                                "        </div>\n" +
                                "        <figcaption>\n" +
                                "            <h2>" + value.name + "</h2>\n" +
                                "            <p>" + value.description + "</p>\n" +
                                "            <p>" + value.category + "</p>\n" +
                                "            <div class=\"price\">$" + value.price + " </div>\n" +
                                "        </figcaption>\n" +
                                "    </figure>\n";
                        }
                    });
                    $("#showitem").append(tableString);
                }
            });
        }else{
            $.ajax({
                type: 'POST',
                url: "product.json",
                dataType: 'json',
                success: function (result) {
                    tableString = "";
                    i=0;
                    $.each(result, function (row, value) {
                        var i = value.name.indexOf(keyword);
                        if(i == 0){
                            tableString += "<figure class=\"snip1268 wow fadeIn\">\n" +
                                "        <div class=\"image\">\n" +
                                "            <img src=\"" + value.img + "\" alt=\"sq-sample15\"/>\n" +
                                "            <a href=\"#\" class=\"add-to-cart\" onclick=\"goShoppingCart($(this))\">Add to Cart</a>\n" +
                                "            <input class=\"itemId\" type=\"text\" value=\"" + value.id + "\" hidden>\n" +
                                "        </div>\n" +
                                "        <figcaption>\n" +
                                "            <h2>" + value.name + "</h2>\n" +
                                "            <p>" + value.description + "</p>\n" +
                                "            <p>" + value.category + "</p>\n" +
                                "            <div class=\"price\">$" + value.price + " </div>\n" +
                                "        </figcaption>\n" +
                                "    </figure>\n";
                        }
                    });
                    $("#showitem").append(tableString);
                }
            });
        }
    });

    $('#all').click(function () {
        $("#showitem").html("");
        $.ajax({
            type: 'POST',
            url: "product.json",
            dataType: 'json',
            success: function (result) {
                tableString = "";
                i=0;
                $.each(result, function (row, value) {
                    tableString += "<figure class=\"snip1268 wow fadeIn\">\n" +
                        "        <div class=\"image\">\n" +
                        "            <img src=\"" + value.img + "\" alt=\"sq-sample15\"/>\n" +
                        "            <a href=\"#\" class=\"add-to-cart\" onclick=\"goShoppingCart($(this))\">Add to Cart</a>\n" +
                        "            <input class=\"itemId\" type=\"text\" value=\"" + value.id + "\" hidden>\n" +
                        "        </div>\n" +
                        "        <figcaption>\n" +
                        "            <h2>" + value.name + "</h2>\n" +
                        "            <p>" + value.description + "</p>\n" +
                        "            <p>" + value.category + "</p>\n" +
                        "            <div class=\"price\">$" + value.price + " </div>\n" +
                        "        </figcaption>\n" +
                        "    </figure>\n";
                    console.log(tableString);


                });
                $("#showitem").append(tableString);
            }
        });
    });

    $('#earphone').click(function () {
        $("#showitem").html("");
        $.ajax({
            type: 'POST',
            url: "product.json",
            dataType: 'json',
            success: function (result) {
                tableString = "";
                i=0;
                $.each(result, function (row, value) {
                    if(value.category == "Earphone"){
                        tableString += "<figure class=\"snip1268 wow fadeIn\">\n" +
                            "        <div class=\"image\">\n" +
                            "            <img src=\"" + value.img + "\" alt=\"sq-sample15\"/>\n" +
                            "            <a href=\"#\" class=\"add-to-cart\" onclick=\"goShoppingCart($(this))\">Add to Cart</a>\n" +
                            "            <input class=\"itemId\" type=\"text\" value=\"" + value.id + "\" hidden>\n" +
                            "        </div>\n" +
                            "        <figcaption>\n" +
                            "            <h2>" + value.name + "</h2>\n" +
                            "            <p>" + value.description + "</p>\n" +
                            "            <p>" + value.category + "</p>\n" +
                            "            <div class=\"price\">$" + value.price + " </div>\n" +
                            "        </figcaption>\n" +
                            "    </figure>\n";
                    }
                });
                $("#showitem").append(tableString);
            }
        });
    });

    $('#tools').click(function () {
        $("#showitem").html("");
        $.ajax({
            type: 'POST',
            url: "product.json",
            dataType: 'json',
            success: function (result) {
                tableString = "";
                i=0;
                $.each(result, function (row, value) {
                    if(value.category == "Engineering Tools"){
                        tableString += "<figure class=\"snip1268 wow fadeIn\">\n" +
                            "        <div class=\"image\">\n" +
                            "            <img src=\"" + value.img + "\" alt=\"sq-sample15\"/>\n" +
                            "            <a href=\"#\" class=\"add-to-cart\" onclick=\"goShoppingCart($(this))\">Add to Cart</a>\n" +
                            "            <input class=\"itemId\" type=\"text\" value=\"" + value.id + "\" hidden>\n" +
                            "        </div>\n" +
                            "        <figcaption>\n" +
                            "            <h2>" + value.name + "</h2>\n" +
                            "            <p>" + value.description + "</p>\n" +
                            "            <p>" + value.category + "</p>\n" +
                            "            <div class=\"price\">$" + value.price + " </div>\n" +
                            "        </figcaption>\n" +
                            "    </figure>\n";
                    }
                });
                $("#showitem").append(tableString);
            }
        });
    });

    $('#notebook').click(function () {
        $("#showitem").html("");
        $.ajax({
            type: 'POST',
            url: "product.json",
            dataType: 'json',
            success: function (result) {
                tableString = "";
                i=0;
                $.each(result, function (row, value) {
                    if(value.category == "NoteBook"){
                        tableString += "<figure class=\"snip1268 wow fadeIn\">\n" +
                            "        <div class=\"image\">\n" +
                            "            <img src=\"" + value.img + "\" alt=\"sq-sample15\"/>\n" +
                            "            <a href=\"#\" class=\"add-to-cart\" onclick=\"goShoppingCart($(this))\">Add to Cart</a>\n" +
                            "            <input class=\"itemId\" type=\"text\" value=\"" + value.id + "\" hidden>\n" +
                            "        </div>\n" +
                            "        <figcaption>\n" +
                            "            <h2>" + value.name + "</h2>\n" +
                            "            <p>" + value.description + "</p>\n" +
                            "            <p>" + value.category + "</p>\n" +
                            "            <div class=\"price\">$" + value.price + " </div>\n" +
                            "        </figcaption>\n" +
                            "    </figure>\n";
                    }
                });
                $("#showitem").append(tableString);
            }
        });
    });


    $(document).ready(function () {
        $.ajax({
            type: 'POST',
            url: "product.json",
            dataType: 'json',
            success: function (result) {
                tableString = "";
                i=0;
                $.each(result, function (row, value) {

                    tableString += "<figure class=\"snip1268 wow fadeIn\">\n" +
                        "        <div class=\"image\">\n" +
                        "            <img src=\"" + value.img + "\" alt=\"sq-sample15\"/>\n" +
                        "            <a href=\"#\" class=\"add-to-cart\" onclick=\"goShoppingCart($(this))\">Add to Cart</a>\n" +
                        "            <input class=\"itemId\" type=\"text\" value=\"" + value.id + "\" hidden>\n" +
                        "        </div>\n" +
                        "        <figcaption>\n" +
                        "            <h2>" + value.name + "</h2>\n" +
                        "            <p>" + value.description + "</p>\n" +
                        "            <p>" + value.category + "</p>\n" +
                        "            <div class=\"price\">$" + value.price + " </div>\n" +
                        "        </figcaption>\n" +
                        "    </figure>\n";
                    console.log(tableString);


                });
                $("#showitem").append(tableString);
            }
        });
    });



    $('#li1').hover(function () {
        $('#li1').css("color", "#0031ff");
    }, function () {
        $('#li1').css("color", "black");
    });

    $('#li2').hover(function () {
        $('#li2').css("color", "#d800ff");
    }, function () {
        $('#li2').css("color", "black");
    });

    $('#li3').hover(function () {
        $('#li3').css("color", "#ff0000");
    }, function () {
        $('#li3').css("color", "black");
    });

    $('#li4').hover(function () {
        $('#li4').css("color", "#ff9300");
    }, function () {
        $('#li4').css("color", "black");
    });

//    $('.add-to-cart').on('click', function () {
//        var shoppingCart;
//        var getid = $(this).parent('.image').find('.itemId').val();
//        console.log(getid);
//        if (typeof Cookies.get('shoppingCart') == 'undefined'){
//            shoppingCart = [getid];
//
//        }else{
//            var added = false;
//            var oldShoppingCart = Cookies.getJSON('shoppingCart');
//            for (i = 0; i < oldShoppingCart.length; i++) {
//
//                            if (oldShoppingCart[i] == getid) {
//                                console.log(oldShoppingCart[i]);
//                                shoppingCart = oldShoppingCart;
//                                added = true;
//                                break;
//                            }
//                        }if(!added){
//                            oldShoppingCart.push(getid);
//                            shoppingCart = oldShoppingCart;
//                        }
//
//        }
//        Cookies.set('shoppingCart',shoppingCart);
////
//
//        var cart = $('#shopping-cart');
//        var imgtodrag = $(this).parent('.image').find("img").eq(0);
//
//        if (imgtodrag) {
//            var imgclone = imgtodrag.clone()
//                .offset({
//                    top: imgtodrag.offset().top,
//                    left: imgtodrag.offset().left
//                })
//                .css({
//                    'opacity': '0.5',
//                    'position': 'absolute',
//                    'height': '150px',
//                    'width': '150px',
//                    'z-index': '100'
//                })
//                .appendTo($('body'))
//                .animate({
//                    'top': cart.offset().top + 10,
//                    'left': cart.offset().left + 10,
//                    'width': 75,
//                    'height': 75
//                }, 1000, 'easeInOutExpo');
//
//            setTimeout(function () {
//                cart.effect("shake", {
//                    times: 3
//                }, 200);
//            }, 1200);
//
//            imgclone.animate({
//                'width': 0,
//                'height': 0
//            }, function () {
//                $(this).detach()
//            });
//        }
//    });

    var goShoppingCart = function (element) {
        var shoppingCart;
        var getid = element.parent('.image').find('.itemId').val();
        console.log(getid);
        if (typeof Cookies.get('shoppingCart') == 'undefined'){
            shoppingCart = [getid];

        }else{
            var added = false;
            var oldShoppingCart = Cookies.getJSON('shoppingCart');
            for (i = 0; i < oldShoppingCart.length; i++) {

                            if (oldShoppingCart[i] == getid) {
                                console.log(oldShoppingCart[i]);
                                shoppingCart = oldShoppingCart;
                                added = true;
                                break;
                            }
                        }if(!added){
                            oldShoppingCart.push(getid);
                            shoppingCart = oldShoppingCart;
                        }

        }
        Cookies.set('shoppingCart',shoppingCart);
//

        var cart = $('#shopping-cart');
        var imgtodrag = element.parent('.image').find("img").eq(0);

        if (imgtodrag) {
            var imgclone = imgtodrag.clone()
                .offset({
                    top: imgtodrag.offset().top,
                    left: imgtodrag.offset().left
                })
                .css({
                    'opacity': '0.5',
                    'position': 'absolute',
                    'height': '150px',
                    'width': '150px',
                    'z-index': '100'
                })
                .appendTo($('body'))
                .animate({
                    'top': cart.offset().top + 10,
                    'left': cart.offset().left + 10,
                    'width': 75,
                    'height': 75
                }, 1000, 'easeInOutExpo');

            setTimeout(function () {
                cart.effect("shake", {
                    times: 3
                }, 200);
            }, 1200);

            imgclone.animate({
                'width': 0,
                'height': 0
            }, function () {
                $(this).detach()
            });
        }
    }


    /* Search bar */

    var resizeElements;

    $(document).ready(function() {

        // Set up common variables
        // --------------------------------------------------

        var bar = ".search_bar";
        var input = bar + " input[type='text']";
        var button = bar + " button[type='submit']";
        var dropdown = bar + " .search_dropdown";
        var dropdownLabel = dropdown + " > span";
        var dropdownList = dropdown + " ul";
        var dropdownListItems = dropdownList + " li";


        // Set up common functions
        // --------------------------------------------------

        resizeElements = function() {
            var barWidth = $(bar).outerWidth();

            var labelWidth = $(dropdownLabel).outerWidth();
            $(dropdown).width(labelWidth);

            var dropdownWidth = $(dropdown).outerWidth();
            var buttonWidth	= $(button).outerWidth();
            var inputWidth = barWidth - dropdownWidth - buttonWidth;
            var inputWidthPercent = inputWidth / barWidth * 100 + "%";

            $(input).css({ 'margin-left': dropdownWidth, 'width': inputWidthPercent });
        };

        function dropdownOn() {
            $(dropdownList).fadeIn(25);
            $(dropdown).addClass("active");
        }

        function dropdownOff() {
            $(dropdownList).fadeOut(25);
            $(dropdown).removeClass("active");
        }


        // Initialize initial resize of initial elements
        // --------------------------------------------------
        resizeElements();


        // Toggle new dropdown menu on click
        // --------------------------------------------------

        $(dropdown).click(function(event) {
            if ($(dropdown).hasClass("active")) {
                dropdownOff();
            } else {
                dropdownOn();
            }

            event.stopPropagation();
            return false;
        });

        $("html").click(dropdownOff);


        // Activate new dropdown option and show tray if applicable
        // --------------------------------------------------

        $(dropdownListItems).click(function() {
            $(this).siblings("li.selected").removeClass("selected");
            $(this).addClass("selected");

            // Focus the input
            $(this).parents("form.search_bar:first").find("input[type=text]").focus();

            var labelText = $(this).text();
            $(dropdownLabel).text(labelText);

            resizeElements();

        });


        // Resize all elements when the window resizes
        // --------------------------------------------------

        $(window).resize(function() {
            resizeElements();
        });
    });

</script>

</html>